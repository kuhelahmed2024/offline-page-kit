{"version":3,"sources":["../src/cli.ts","../src/core/utils.ts","../src/core/offlineHtml.ts","../src/core/offlineSvg.ts","../src/core/swTemplate.ts"],"sourcesContent":["#!/usr/bin/env node\r\nimport path from \"node:path\";\r\nimport { parseArgs, splitList, writeFileSafe, exists } from \"./core/utils\";\r\nimport { offlineHtmlTemplate } from \"./core/offlineHtml\";\r\nimport { offlineSvgTemplate } from \"./core/offlineSvg\";\r\nimport { buildServiceWorkerJS } from \"./core/swTemplate\";\r\nimport type { OfflineKitBuildOptions } from \"./types\";\r\n\r\nfunction normalizePublicPath(p: string) {\r\n    if (!p.startsWith(\"/\")) return \"/\" + p;\r\n    return p;\r\n}\r\n\r\nfunction withDefaults(o: OfflineKitBuildOptions): Required<OfflineKitBuildOptions> {\r\n    return {\r\n        outDir: o.outDir ?? \"public\",\r\n        swFileName: o.swFileName ?? \"sw.js\",\r\n        offlinePage: normalizePublicPath(o.offlinePage ?? \"/offline.html\"),\r\n        offlineImage: normalizePublicPath(o.offlineImage ?? \"/offline.svg\"),\r\n        cacheName: o.cacheName ?? \"offline-page-kit\",\r\n        precache: o.precache ?? [],\r\n        htmlStrategy: o.htmlStrategy ?? \"networkFirst\",\r\n        assetStrategy: o.assetStrategy ?? \"staleWhileRevalidate\",\r\n        imageStrategy: o.imageStrategy ?? \"cacheFirst\",\r\n        assetExtensions: o.assetExtensions ?? [],\r\n        apiPrefixes: o.apiPrefixes ?? [],\r\n    };\r\n}\r\n\r\nconst args = parseArgs(process.argv.slice(2));\r\nconst cmd = process.argv.slice(2).find(a => !a.startsWith(\"--\")) || \"init\";\r\n\r\nconst outDir = path.resolve(process.cwd(), args.get(\"outDir\") || \"public\");\r\n\r\nconst options = withDefaults({\r\n    outDir,\r\n    swFileName: args.get(\"swFileName\") || \"sw.js\",\r\n    offlinePage: args.get(\"offlinePage\") || \"/offline.html\",\r\n    offlineImage: args.get(\"offlineImage\") || \"/offline.svg\",\r\n    cacheName: args.get(\"cacheName\") || \"offline-page-kit\",\r\n    precache: splitList(args.get(\"precache\")),\r\n    htmlStrategy: (args.get(\"htmlStrategy\") as any) || \"networkFirst\",\r\n    assetStrategy: (args.get(\"assetStrategy\") as any) || \"staleWhileRevalidate\",\r\n    imageStrategy: (args.get(\"imageStrategy\") as any) || \"cacheFirst\",\r\n    assetExtensions: splitList(args.get(\"assetExtensions\")),\r\n    apiPrefixes: splitList(args.get(\"apiPrefixes\")),\r\n} as OfflineKitBuildOptions);\r\n\r\nconst swOut = path.join(outDir, options.swFileName);\r\nconst offlineHtmlOut = path.join(outDir, options.offlinePage.replace(/^\\//, \"\"));\r\nconst offlineSvgOut = path.join(outDir, options.offlineImage.replace(/^\\//, \"\"));\r\n\r\nif (cmd === \"init\" || cmd === \"build\") {\r\n    // generate offline page if missing OR force (when build)\r\n    if (cmd === \"build\" || !exists(offlineHtmlOut)) {\r\n        writeFileSafe(offlineHtmlOut, offlineHtmlTemplate());\r\n    }\r\n    if (cmd === \"build\" || !exists(offlineSvgOut)) {\r\n        writeFileSafe(offlineSvgOut, offlineSvgTemplate());\r\n    }\r\n\r\n    const sw = buildServiceWorkerJS(options);\r\n    writeFileSafe(swOut, sw);\r\n\r\n    console.log(`[offline-page-kit] Generated:\r\n- ${swOut}\r\n- ${offlineHtmlOut}\r\n- ${offlineSvgOut}\r\n`);\r\n} else {\r\n    console.log(`[offline-page-kit] Unknown command: ${cmd}\r\nUse:\r\n  offline-page-kit init --outDir public\r\n  offline-page-kit build --outDir public\r\n`);\r\n}","import fs from \"node:fs\";\r\nimport path from \"node:path\";\r\n\r\nexport function ensureDir(p: string) {\r\n    fs.mkdirSync(p, { recursive: true });\r\n}\r\n\r\nexport function writeFileSafe(filePath: string, content: string) {\r\n    ensureDir(path.dirname(filePath));\r\n    fs.writeFileSync(filePath, content, \"utf8\");\r\n}\r\n\r\nexport function exists(filePath: string) {\r\n    try { fs.accessSync(filePath); return true; } catch { return false; }\r\n}\r\n\r\nexport function parseArgs(argv: string[]) {\r\n    const m = new Map<string, string>();\r\n\r\n    const norm = (k: string) => k.replace(/-/g, \"\").toLowerCase();\r\n\r\n    for (let i = 0; i < argv.length; i++) {\r\n        const a = argv[i];\r\n        if (!a.startsWith(\"--\")) continue;\r\n\r\n        const rawKey = a.slice(2);\r\n        const key = norm(rawKey);\r\n\r\n        const value = argv[i + 1] && !argv[i + 1].startsWith(\"--\") ? argv[++i] : \"true\";\r\n        m.set(key, value);\r\n    }\r\n\r\n    return {\r\n        get(name: string) {\r\n            return m.get(norm(name));\r\n        }\r\n    } as unknown as Map<string, string>;\r\n}\r\n\r\nexport function splitList(v: string | undefined) {\r\n    return (v || \"\")\r\n        .split(\",\")\r\n        .map(s => s.trim())\r\n        .filter(Boolean);\r\n}","export function offlineHtmlTemplate(title = \"You're Offline\") {\r\n  return `<!doctype html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\"/>\r\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\r\n  <title>${title}</title>\r\n  <meta name=\"theme-color\" content=\"#0b0f19\"/>\r\n\r\n  <style>\r\n    :root{\r\n      --bg0:#060912;\r\n      --bg1:#0b1022;\r\n      --card: rgba(255,255,255,.06);\r\n      --card2: rgba(255,255,255,.04);\r\n      --stroke: rgba(255,255,255,.14);\r\n      --text:#ffffff;\r\n      --muted: rgba(255,255,255,.78);\r\n      --muted2: rgba(255,255,255,.62);\r\n      --good:#2ee59d;\r\n      --warn:#ffd166;\r\n      --shadow: 0 20px 80px rgba(0,0,0,.55);\r\n      --radius: 22px;\r\n    }\r\n\r\n    *{box-sizing:border-box}\r\n    html,body{height:100%}\r\n    body{\r\n      margin:0;\r\n      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \"Apple Color Emoji\",\"Segoe UI Emoji\";\r\n      color:var(--text);\r\n      background:\r\n        radial-gradient(900px 500px at 18% 18%, rgba(120,140,255,.20), transparent 60%),\r\n        radial-gradient(700px 500px at 82% 20%, rgba(46,229,157,.16), transparent 58%),\r\n        radial-gradient(600px 520px at 50% 95%, rgba(255,209,102,.14), transparent 55%),\r\n        linear-gradient(180deg, var(--bg0), var(--bg1));\r\n      overflow:hidden;\r\n    }\r\n\r\n    /* Floating blobs (subtle animation) */\r\n    .blob{\r\n      position:absolute; inset:auto;\r\n      width: 520px; height: 520px;\r\n      border-radius: 50%;\r\n      filter: blur(42px);\r\n      opacity:.35;\r\n      animation: float 10s ease-in-out infinite;\r\n      pointer-events:none;\r\n      transform: translate3d(0,0,0);\r\n    }\r\n    .blob.b1{left:-180px; top:-200px; background: rgba(120,140,255,.55); animation-duration: 12s;}\r\n    .blob.b2{right:-210px; top:-150px; background: rgba(46,229,157,.52); animation-duration: 14s;}\r\n    .blob.b3{left:18%; bottom:-320px; background: rgba(255,209,102,.45); animation-duration: 16s;}\r\n\r\n    @keyframes float{\r\n      0%,100%{ transform: translate(0,0) scale(1);}\r\n      50%{ transform: translate(22px,-18px) scale(1.06);}\r\n    }\r\n\r\n    /* Main layout */\r\n    .wrap{\r\n      min-height:100%;\r\n      display:grid;\r\n      place-items:center;\r\n      padding: 24px;\r\n      position:relative;\r\n      z-index:1;\r\n    }\r\n\r\n    .card{\r\n      width:min(720px, 100%);\r\n      border-radius: var(--radius);\r\n      background: linear-gradient(180deg, var(--card), var(--card2));\r\n      border:1px solid var(--stroke);\r\n      box-shadow: var(--shadow);\r\n      padding: 26px;\r\n      backdrop-filter: blur(10px);\r\n      -webkit-backdrop-filter: blur(10px);\r\n\r\n      animation: pop .55s cubic-bezier(.2,.9,.2,1) both;\r\n    }\r\n\r\n    @keyframes pop{\r\n      from{ opacity:0; transform: translateY(14px) scale(.98); }\r\n      to{ opacity:1; transform: translateY(0) scale(1); }\r\n    }\r\n\r\n    .top{\r\n      display:flex;\r\n      align-items:flex-start;\r\n      justify-content:space-between;\r\n      gap:16px;\r\n      margin-bottom: 14px;\r\n    }\r\n\r\n    .badge{\r\n      display:inline-flex;\r\n      align-items:center;\r\n      gap:10px;\r\n      padding: 10px 12px;\r\n      border-radius: 999px;\r\n      border:1px solid rgba(255,255,255,.14);\r\n      background: rgba(0,0,0,.18);\r\n      color: var(--muted);\r\n      font-size: 13px;\r\n      user-select:none;\r\n      white-space:nowrap;\r\n    }\r\n\r\n    /* Ping dot */\r\n    .dot{\r\n      width:10px;height:10px;border-radius:50%;\r\n      background: var(--warn);\r\n      box-shadow: 0 0 0 0 rgba(255,209,102,.65);\r\n      animation: ping 1.6s infinite;\r\n    }\r\n    @keyframes ping{\r\n      0%{ box-shadow: 0 0 0 0 rgba(255,209,102,.55); }\r\n      70%{ box-shadow: 0 0 0 10px rgba(255,209,102,0); }\r\n      100%{ box-shadow: 0 0 0 0 rgba(255,209,102,0); }\r\n    }\r\n\r\n    h1{\r\n      margin: 0 0 8px;\r\n      font-size: clamp(26px, 3.3vw, 34px);\r\n      letter-spacing: -0.02em;\r\n      line-height: 1.15;\r\n    }\r\n\r\n    p{\r\n      margin: 0;\r\n      color: var(--muted2);\r\n      line-height: 1.55;\r\n      font-size: 15.5px;\r\n    }\r\n\r\n    .hero{\r\n      display:flex;\r\n      align-items:center;\r\n      gap: 14px;\r\n      margin-top: 10px;\r\n    }\r\n\r\n    /* Animated wifi icon */\r\n    .wifi{\r\n      width: 54px; height: 54px;\r\n      border-radius: 16px;\r\n      display:grid; place-items:center;\r\n      background: rgba(255,255,255,.06);\r\n      border:1px solid rgba(255,255,255,.12);\r\n      position:relative;\r\n      overflow:hidden;\r\n    }\r\n    .wifi::after{\r\n      content:\"\";\r\n      position:absolute; inset:-40%;\r\n      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 55%);\r\n      animation: sheen 2.8s ease-in-out infinite;\r\n    }\r\n    @keyframes sheen{\r\n      0%,100%{ transform: translate(-8px,-6px) rotate(0deg); opacity:.75;}\r\n      50%{ transform: translate(10px,8px) rotate(8deg); opacity:.9;}\r\n    }\r\n\r\n    .wifi svg{ position:relative; z-index:1; opacity:.95; }\r\n    .wifi path{ animation: wave 1.6s ease-in-out infinite; transform-origin:center; }\r\n    .wifi path:nth-child(1){ opacity:.35; animation-delay:.05s;}\r\n    .wifi path:nth-child(2){ opacity:.55; animation-delay:.12s;}\r\n    .wifi path:nth-child(3){ opacity:.75; animation-delay:.2s;}\r\n    .wifi circle{ opacity:.9; animation: blink 1.2s ease-in-out infinite; }\r\n\r\n    @keyframes wave{\r\n      0%,100%{ transform: scale(1); }\r\n      50%{ transform: scale(1.06); }\r\n    }\r\n    @keyframes blink{\r\n      0%,100%{ opacity:.9; }\r\n      50%{ opacity:.45; }\r\n    }\r\n\r\n    .actions{\r\n      display:flex;\r\n      flex-wrap:wrap;\r\n      gap: 10px;\r\n      margin-top: 18px;\r\n    }\r\n\r\n    .btn{\r\n      appearance:none;\r\n      border:0;\r\n      border-radius: 14px;\r\n      padding: 11px 14px;\r\n      cursor:pointer;\r\n      text-decoration:none;\r\n      display:inline-flex;\r\n      align-items:center;\r\n      gap:10px;\r\n      font-weight: 650;\r\n      font-size: 14.5px;\r\n      letter-spacing: .01em;\r\n      transition: transform .12s ease, filter .12s ease, background .2s ease, border-color .2s ease;\r\n      user-select:none;\r\n    }\r\n    .btn:active{ transform: translateY(1px) scale(.99); }\r\n\r\n    .primary{\r\n      background: #ffffff;\r\n      color: #0b0f19;\r\n      box-shadow: 0 8px 24px rgba(255,255,255,.12);\r\n    }\r\n    .primary:hover{ filter: brightness(0.98); }\r\n\r\n    .ghost{\r\n      background: rgba(255,255,255,.08);\r\n      color: var(--text);\r\n      border: 1px solid rgba(255,255,255,.14);\r\n    }\r\n    .ghost:hover{\r\n      background: rgba(255,255,255,.10);\r\n      border-color: rgba(255,255,255,.18);\r\n    }\r\n\r\n    .hint{\r\n      margin-top: 14px;\r\n      display:flex;\r\n      gap:10px;\r\n      flex-wrap:wrap;\r\n      align-items:center;\r\n      color: var(--muted2);\r\n      font-size: 13px;\r\n    }\r\n\r\n    .kbd{\r\n      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", monospace;\r\n      font-size: 12px;\r\n      padding: 4px 8px;\r\n      border-radius: 9px;\r\n      border:1px solid rgba(255,255,255,.14);\r\n      background: rgba(0,0,0,.20);\r\n      color: rgba(255,255,255,.82);\r\n    }\r\n\r\n    /* Toast */\r\n    .toast{\r\n      position: fixed;\r\n      left: 50%;\r\n      bottom: 18px;\r\n      transform: translateX(-50%);\r\n      padding: 10px 12px;\r\n      border-radius: 999px;\r\n      background: rgba(0,0,0,.40);\r\n      border:1px solid rgba(255,255,255,.14);\r\n      color: rgba(255,255,255,.86);\r\n      font-size: 13px;\r\n      display:flex;\r\n      gap:10px;\r\n      align-items:center;\r\n      backdrop-filter: blur(10px);\r\n      -webkit-backdrop-filter: blur(10px);\r\n      box-shadow: 0 10px 40px rgba(0,0,0,.35);\r\n      opacity:0;\r\n      pointer-events:none;\r\n      transition: opacity .22s ease, transform .22s ease;\r\n    }\r\n    .toast.show{\r\n      opacity:1;\r\n      transform: translateX(-50%) translateY(-2px);\r\n    }\r\n    .toast .okdot{\r\n      width:10px;height:10px;border-radius:50%;\r\n      background: var(--good);\r\n      box-shadow: 0 0 0 6px rgba(46,229,157,.10);\r\n    }\r\n\r\n    /* Reduce motion */\r\n    @media (prefers-reduced-motion: reduce){\r\n      .blob, .dot, .wifi path, .wifi circle, .card{ animation:none !important; }\r\n      .toast{ transition:none; }\r\n    }\r\n  </style>\r\n</head>\r\n\r\n<body>\r\n  <div class=\"blob b1\"></div>\r\n  <div class=\"blob b2\"></div>\r\n  <div class=\"blob b3\"></div>\r\n\r\n  <main class=\"wrap\" role=\"main\">\r\n    <section class=\"card\" aria-labelledby=\"offline-title\">\r\n      <div class=\"top\">\r\n        <div>\r\n          <h1 id=\"offline-title\">üòµ‚Äçüí´ You‚Äôre Offline</h1>\r\n          <p>\r\n            No internet connection detected. Don‚Äôt worry ‚Äî you can retry now,\r\n            or go home if it‚Äôs already cached. ‚ú®\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"badge\" aria-live=\"polite\">\r\n          <span class=\"dot\" aria-hidden=\"true\"></span>\r\n          <span id=\"netText\">Offline mode</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"hero\">\r\n        <div class=\"wifi\" aria-hidden=\"true\">\r\n          <svg width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M2.5 9.2C8.6 3.2 15.4 3.2 21.5 9.2\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n            <path d=\"M5.8 12.4C10.1 8.3 13.9 8.3 18.2 12.4\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n            <path d=\"M9.2 15.7C11.2 13.9 12.8 13.9 14.8 15.7\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n            <circle cx=\"12\" cy=\"19\" r=\"1.4\" fill=\"white\"/>\r\n          </svg>\r\n        </div>\r\n\r\n        <div>\r\n          <p style=\"margin:0 0 6px;color:rgba(255,255,255,.86);font-weight:650\">\r\n            Tip: Your cached pages may still open ‚ö°\r\n          </p>\r\n          <p style=\"margin:0;color:rgba(255,255,255,.62)\">\r\n            We‚Äôll auto-refresh when you‚Äôre back online ‚úÖ\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"actions\">\r\n        <button class=\"btn primary\" id=\"retryBtn\" type=\"button\">\r\n          üîÑ Retry\r\n        </button>\r\n        <a class=\"btn ghost\" href=\"/\" rel=\"noopener\">\r\n          üè† Go Home\r\n        </a>\r\n        <button class=\"btn ghost\" id=\"copyBtn\" type=\"button\" title=\"Copy current URL\">\r\n          üîó Copy URL\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"hint\">\r\n        <span>Quick keys:</span>\r\n        <span class=\"kbd\">R</span> Retry\r\n        <span class=\"kbd\">H</span> Home\r\n      </div>\r\n    </section>\r\n  </main>\r\n\r\n  <div class=\"toast\" id=\"toast\" role=\"status\" aria-live=\"polite\">\r\n    <span class=\"okdot\" aria-hidden=\"true\"></span>\r\n    <span id=\"toastText\">Back online ‚Äî reloading‚Ä¶</span>\r\n  </div>\r\n\r\n  <script>\r\n    const retryBtn = document.getElementById(\"retryBtn\");\r\n    const copyBtn  = document.getElementById(\"copyBtn\");\r\n    const netText  = document.getElementById(\"netText\");\r\n    const toast    = document.getElementById(\"toast\");\r\n    const toastText= document.getElementById(\"toastText\");\r\n\r\n    function showToast(msg){\r\n      toastText.textContent = msg;\r\n      toast.classList.add(\"show\");\r\n      clearTimeout(showToast._t);\r\n      showToast._t = setTimeout(() => toast.classList.remove(\"show\"), 2200);\r\n    }\r\n\r\n    function updateStatus(){\r\n      const online = navigator.onLine;\r\n      netText.textContent = online ? \"Online\" : \"Offline mode\";\r\n      // If it becomes online, reload after tiny delay (feels smoother)\r\n      if (online){\r\n        showToast(\"‚úÖ Back online ‚Äî reloading‚Ä¶\");\r\n        setTimeout(() => location.reload(), 650);\r\n      }\r\n    }\r\n\r\n    retryBtn.addEventListener(\"click\", () => location.reload());\r\n\r\n    copyBtn.addEventListener(\"click\", async () => {\r\n      try{\r\n        await navigator.clipboard.writeText(location.href);\r\n        showToast(\"üìã URL copied!\");\r\n      }catch{\r\n        // fallback\r\n        const ta = document.createElement(\"textarea\");\r\n        ta.value = location.href;\r\n        document.body.appendChild(ta);\r\n        ta.select();\r\n        document.execCommand(\"copy\");\r\n        ta.remove();\r\n        showToast(\"üìã URL copied!\");\r\n      }\r\n    });\r\n\r\n    window.addEventListener(\"online\", updateStatus);\r\n    window.addEventListener(\"offline\", updateStatus);\r\n\r\n    // Keyboard shortcuts\r\n    window.addEventListener(\"keydown\", (e) => {\r\n      const k = (e.key || \"\").toLowerCase();\r\n      if (k === \"r\") location.reload();\r\n      if (k === \"h\") location.href = \"/\";\r\n    });\r\n\r\n    // initial\r\n    updateStatus();\r\n  </script>\r\n</body>\r\n</html>`;\r\n}","export function offlineSvgTemplate() {\r\n  return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1200\" height=\"630\" viewBox=\"0 0 1200 630\">\r\n  <rect width=\"1200\" height=\"630\" fill=\"#0b0f19\"/>\r\n  <text x=\"80\" y=\"220\" fill=\"#ffffff\" font-size=\"64\" font-family=\"system-ui, -apple-system, Segoe UI, Roboto\">You‚Äôre Offline</text>\r\n  <text x=\"80\" y=\"300\" fill=\"#cbd5e1\" font-size=\"28\" font-family=\"system-ui, -apple-system, Segoe UI, Roboto\">Please check your connection and try again.</text>\r\n  <circle cx=\"1040\" cy=\"220\" r=\"90\" fill=\"rgba(255,255,255,0.08)\"/>\r\n  <path d=\"M980 220c40-40 120-40 160 0\" stroke=\"#fff\" stroke-width=\"10\" fill=\"none\" opacity=\"0.6\"/>\r\n  <path d=\"M1010 250c25-25 75-25 100 0\" stroke=\"#fff\" stroke-width=\"10\" fill=\"none\" opacity=\"0.6\"/>\r\n  <circle cx=\"1060\" cy=\"290\" r=\"10\" fill=\"#fff\" opacity=\"0.7\"/>\r\n</svg>`;\r\n}","import type { OfflineKitBuildOptions } from \"../types\";\r\n\r\nconst js = (v: unknown) => JSON.stringify(v);\r\n\r\nexport function buildServiceWorkerJS(options: Required<OfflineKitBuildOptions>) {\r\n  const { cacheName, offlinePage, offlineImage } = options;\r\n\r\n  return `/* offline-page-kit service worker (minimal) */\r\nconst CACHE_NAME = ${js(cacheName)};\r\nconst OFFLINE_PAGE = ${js(offlinePage)};\r\nconst OFFLINE_IMAGE = ${js(offlineImage)};\r\n\r\nself.addEventListener(\"install\", (event) => {\r\n  event.waitUntil((async () => {\r\n    const cache = await caches.open(CACHE_NAME);\r\n\r\n    // ‚úÖ Do not let one 404 kill the install\r\n    await Promise.allSettled([\r\n      cache.add(OFFLINE_PAGE),\r\n      cache.add(OFFLINE_IMAGE),\r\n    ]);\r\n\r\n    await self.skipWaiting();\r\n  })());\r\n});\r\n\r\nself.addEventListener(\"activate\", (event) => {\r\n  event.waitUntil((async () => {\r\n    await self.clients.claim();\r\n  })());\r\n});\r\n\r\nself.addEventListener(\"fetch\", (event) => {\r\n  const req = event.request;\r\n\r\n  // ‚úÖ Offline fallback only for page navigations\r\n  if (req.mode === \"navigate\") {\r\n    event.respondWith((async () => {\r\n      try {\r\n        return await fetch(req);\r\n      } catch {\r\n        const cache = await caches.open(CACHE_NAME);\r\n        return (await cache.match(OFFLINE_PAGE)) || new Response(\"Offline\", { status: 503 });\r\n      }\r\n    })());\r\n  }\r\n});\r\n`;\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAAA,oBAAiB;;;ACDjB,qBAAe;AACf,uBAAiB;AAEV,SAAS,UAAU,GAAW;AACjC,iBAAAC,QAAG,UAAU,GAAG,EAAE,WAAW,KAAK,CAAC;AACvC;AAEO,SAAS,cAAc,UAAkB,SAAiB;AAC7D,YAAU,iBAAAC,QAAK,QAAQ,QAAQ,CAAC;AAChC,iBAAAD,QAAG,cAAc,UAAU,SAAS,MAAM;AAC9C;AAEO,SAAS,OAAO,UAAkB;AACrC,MAAI;AAAE,mBAAAA,QAAG,WAAW,QAAQ;AAAG,WAAO;AAAA,EAAM,QAAQ;AAAE,WAAO;AAAA,EAAO;AACxE;AAEO,SAAS,UAAU,MAAgB;AACtC,QAAM,IAAI,oBAAI,IAAoB;AAElC,QAAM,OAAO,CAAC,MAAc,EAAE,QAAQ,MAAM,EAAE,EAAE,YAAY;AAE5D,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AAClC,UAAM,IAAI,KAAK,CAAC;AAChB,QAAI,CAAC,EAAE,WAAW,IAAI,EAAG;AAEzB,UAAM,SAAS,EAAE,MAAM,CAAC;AACxB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,QAAQ,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,EAAE,WAAW,IAAI,IAAI,KAAK,EAAE,CAAC,IAAI;AACzE,MAAE,IAAI,KAAK,KAAK;AAAA,EACpB;AAEA,SAAO;AAAA,IACH,IAAI,MAAc;AACd,aAAO,EAAE,IAAI,KAAK,IAAI,CAAC;AAAA,IAC3B;AAAA,EACJ;AACJ;AAEO,SAAS,UAAU,GAAuB;AAC7C,UAAQ,KAAK,IACR,MAAM,GAAG,EACT,IAAI,OAAK,EAAE,KAAK,CAAC,EACjB,OAAO,OAAO;AACvB;;;AC5CO,SAAS,oBAAoB,QAAQ,kBAAkB;AAC5D,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA,WAKE,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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","names":["import_node_path","fs","path","options","path"]}